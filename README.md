#shri-tv (PhoneGap app)
Приложение является прототипом телепрограммы. Разработано с использование PhoneGap.

##Скрины приложения
###Иконка iOS
![alt text](https://vchagaev.github.io/shri-task1-tv/screens/custom-icon.jpg "Иконка iOS")
###Иконка Android
![alt text](https://vchagaev.github.io/shri-task1-tv/screens/android-home.png "Иконка Android")
###Custom splashscreen
![alt text](https://vchagaev.github.io/shri-task1-tv/screens/custom-splashscreen.jpg "Custom splashscreen")
###Главная страница
![alt text](https://vchagaev.github.io/shri-task1-tv/screens/mainmenu.jpg "Главная страница")
###БЭМ селект
![alt text](https://vchagaev.github.io/shri-task1-tv/screens/bem-select.jpg "БЭМ компонент")
###Страница шоу
![alt text](https://vchagaev.github.io/shri-task1-tv/screens/description.jpg "Страница шоу")

##Работа с данными
Ренедирнг данных происходит на клиенте. С использование скомпилированного pug-шаблона. <br>
Данные сначала тянутся fetch'ем из json фалйа а затем записываются в indexedDB. Если fetch не удался то данные берутся из бд. <br>
В качестве полифила для indexedDB используется плагин **cordova-plugin-indexeddb-async**. <br>
IndexedDB использовал только как хранение для одного объека, который получаю по fetch с gh-pages.

##Обзор фреймворков и библиотек
**http://getbootstrap.com** - набор компонентов. Считаю что они не очень подходят для мобильных приложений.<br>
**http://goratchet.com** - набор компонентов. Специально для мобильных приложений. Выглядит неплохо, но сразу видно сильное различие от натива. Сейчас уже почти не развивается, судя по репозитории.<br>
**https://ru.bem.info/libs/bem-components** - набор БЭМ компонентов. Удобвно использовать с БЭМ стеком. Без него не удобно, например для добавления select пришлось повозиться.<br>
**http://www.material-ui.com/** - набор react компонентов. Больше подходит для Android разработки так как используется meterial design, а в iOS другой стайл гайд.<br>
**http://jquerymobile.com** - набор компонентов. Как мне кажется тоже больше подходят для веба чем для приложений.<br>
**https://onsen.io** - фреймворк для создания гибридных приложений. Имеет хорошие компоненты. Пдойдет как для Android, так и для iOS. Хорошо совместим с Angular и React.<br>
**http://ionicframework.com** - фреймворк. Построен на Cordova и Angular. Имеет большое комьюнити. Хорошие компоненты. <br>
**http://framework7.io** - фреймворк. По демо очень симпотичные компоненты. Как для iOS так и для Android. Имеет интересные функции (Swipe Back, Swipe Actions, Pull To Refresh) и многие другие<br>
**https://www.sencha.com/products/touch/** - фреймворк. Похоже больше нацелен на enterprise решения. Не самые симптичные компоненты.

##Вывод по фреймворкам и библиотека
В общем я решил попробовать использовать бэм-компоненты, чтобы поучиться ну и я не вижу где реализовать функциональность таких фреймворков как ionic, framework7, onsen в простой телепрограмме.<br>
Останльные библиотеки больше заточены под браузеры. <br>
Если хочется иметь более менее native look приложения, то придется скорее всего поддерживать разные версии для Android и iOS. В этом случае хорошо зайдут уровни переопределения БЭМа. 

##Особенности с которыми столкнулся
* Чтобы избежать дублирования настроил сборку приложения как один из уровней БЭМ.
* Изначально приложение на весь экран (на iOS) и не видно status bar. Нужно настроить statusbar в конфиге. Является плагином
* Удобно генерить иконки и сплешскрин https://www.npmjs.com/package/splashicon-generator
* Тег Content-Security-Policy. Блокирует загрузку css bem-components с cdn. Сохранил локьльно. Блокирует даже инлайн картинки. Придется разбираться в чем тут дело. 
Но пока просто его отключил =) Для настройки content-security-policy удобвно использовать сервис http://cspisawesome.com
* Работать напряму с IndexedDB не приятно и не очень удобно. Приятнее работать с библиотекой Dexie.js. Для корректной работы 
библиотеки пришлось обновить в плагине исходник IndexedDBShim, т.к. он был примерно годичной давности и не совместим с текущей версией библиотеки.
* Опять возникли траблы с IndexDB полифилом на самом телефоне. Так и не удалось подружить Dexie.js с полифилом.
* Нет функции пролистывание к началу при тапе на статусную строку.
* Починил все таки IndexedDB. В итоге пришлось вернуть изначальный indexedDBSHim и отказаться от Dexie.js
* Для билда под Android решил установил Android SDK. После чего установил много лишнего и ненужного и съело очень много места на диске. После удалил лишнее и протестировал в BlueStack

#Телепрограмма
При решении задачи использовал html5 boilerplate шаблон. Старался руководствоваться приниипами
mobile first и progressive enhancement плюс использовать методологию БЭМ. <br>
В итоги и получилось нечто смешанное. В проекте вместо common.blocks - mobile.blocks. Сборка gulp'om. Принципы
позаимствовал с БЭМинаров. Это прототип, как и сказано в задании =))

JS использовал для tooltip'a на десктопной версии, html5shiv и полифилл для ie6-8 на медиа запросы.

[Мобильная версия](https://vchagaev.github.io/shri-task1-tv/mobile/index.html "Your TV shows")<br>
[Версия для планшетов](https://vchagaev.github.io/shri-task1-tv/pad/index.html "Your TV shows")<br>
[Десктнопаня версия](https://vchagaev.github.io/shri-task1-tv/desktop/index.html "Your TV shows")

Подразумевается, что на сервере по заголовкам определится наилучшая версия из трех предложенных. А если не подойдет, то пользователь сам может выбрать наиболее удобную для себя.
